/**
 * wacp-frontend.min.js
 *
 * @author Your Inspiration Themes
 * @package YITH WooCommerce Added to Cart Popup
 * @version 1.2.1
 */
jQuery(document).ready(function(t){"use strict";if("undefined"!=typeof yith_wacp){var e=t("#yith-wacp-popup"),a=e.find(".yith-wacp-overlay"),n=e.find(".yith-wacp-close"),i=function(){t("html").removeClass("yith_wacp_open"),e.removeClass("open"),setTimeout(function(){e.find(".yith-wacp-content").html("").perfectScrollbar("destroy")},1e3),t(document).trigger("yith_wacp_popup_after_closing")},o=function(){var a=e.find(".yith-wacp-wrapper"),n=t(window).width(),i=t(window).height(),o=n-60>yith_wacp.popup_size.width?yith_wacp.popup_size.width:n-60,r=i-120>yith_wacp.popup_size.height?yith_wacp.popup_size.height:i-120;a.css({left:n/2-o/2,top:i/2-r/2,width:o+"px",height:r+"px"})};t(window).on("resize yith_wacp_popup_changed",o),t("body").on("added_to_cart wacp_single_added_to_cart",function(a,n,i,c){void 0===n&&(n=t.parseJSON(sessionStorage.getItem(wc_cart_fragments_params.fragment_name))),t.each(n,function(a,n){if("yith_wacp_message"==a){var i=e.find(".yith-wacp-content");return i.html(n),e.hasClass("open")?(void 0!==t.fn.perfectScrollbar&&i.perfectScrollbar("update"),i.scrollTop(0),t(document).trigger("yith_wacp_popup_changed",[e])):(t(document).trigger("yith_wacp_popup_before_opening",[e]),r(),o(),void 0!==t.fn.perfectScrollbar&&e.find(".yith-wacp-content").perfectScrollbar({suppressScrollX:!0}),yith_wacp.is_mobile&&t("html").addClass("yith_wacp_open"),e.addClass("open"),t(document).trigger("yith_wacp_popup_after_opening",[e])),!1}})}),e.on("click","a.continue-shopping",function(e){"#"==t(this).attr("href")&&(e.preventDefault(),i())}),a.on("click",i),n.on("click",function(t){t.preventDefault(),i()});var r=function(){t(document).on("click",".yith-wacp-remove-cart",function(a){a.preventDefault();var n=t(this).parents("table"),o={action:yith_wacp.actionremove,item_key:t(this).data("item_key"),context:"frontend"};n.block({message:null,overlayCSS:{background:"#fff url("+yith_wacp.loader+") no-repeat center",opacity:.5,cursor:"none"}}),t.ajax({url:yith_wacp.ajaxurl.toString().replace("%%endpoint%%",yith_wacp.actionremove),data:o,dataType:"html",success:function(a){""!=a?(e.find(".yith-wacp-content").html(a),t(document).trigger("yith_wacp_popup_changed",[e])):i()}})})};t(document).on("submit",yith_wacp.form_selectors,function(e){if("undefined"!=typeof wc_cart_fragments_params&&yith_wacp.enable_single){var a,n=!1,i=t(this),o=i.find('button[type="submit"]'),r=i.find('input[name="yith-wacp-is-excluded"]'),c="is_one_click"==i.find('input[name="_yith_wocc_one_click"]').val();try{a="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc")}catch(t){a=!1,t.code==DOMException.QUOTA_EXCEEDED_ERR&&0==window.sessionStorage.length&&(n=!0)}if(!(r.length||n||c)){e.preventDefault(),t(document).trigger("yith_wacp_adding_cart_single"),o.addClass("loading").removeClass("added");var p=i.serializeArray();o.attr("name")&&"add-to-cart"==o.attr("name")&&o.attr("value")&&p.push({name:"add-to-cart",value:o.attr("value")}),p.push({name:"action",value:yith_wacp.actionadd},{name:"context",value:"frontend"}),t.ajax({url:yith_wacp.ajaxurl.toString().replace("%%endpoint%%",yith_wacp.actionadd),data:t.param(p),dataType:"json",type:"POST",success:function(e){if(e.msg)return i.parents("div.product").before(e.msg),t("body").animate({scrollTop:0},500),o.removeAttr("disabled").removeClass("loading"),!1;var n,r={product_id:e.prod_id,variation_id:e.variation_id,quantity:e.quantity,ywacp_is_single:"yes",context:"frontend"};void 0!==wc_cart_fragments_params.wc_ajax_url?n=wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"):(n=wc_cart_fragments_params.ajax_url,r.action="woocommerce_get_refreshed_fragments"),t.ajax({url:n,type:"POST",data:r,success:function(e){e&&e.fragments&&(t.each(e.fragments,function(e,a){t(e).replaceWith(a)}),a&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(e.fragments)),sessionStorage.setItem("wc_cart_hash",e.cart_hash)),t("body").trigger("wc_fragments_refreshed").trigger("wacp_single_added_to_cart"),o.removeAttr("disabled").removeClass("loading").addClass("added"))}})}})}}}),t(document).on("yith_wacp_popup_after_opening yith_wacp_popup_changed",function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(document).find(".variations_form:not(.initialized)").each(function(){t(this).wc_variation_form()}),t.yith_wccl()),"undefined"!=typeof thb_lazyload&&thb_lazyload.update()})}});